local Config <const> = {
    VehicleStash = {
        ["weapon_bat"] = {max = 1}, 
        ["weapon_bottle"] = {max = 1},
        ["weapon_crowbar"] = {max = 1},
        ["weapon_hammer"] = {max = 1},
        ["weapon_knife"] = {max = 1},
        ["weapon_machete"] = {max = 1},
        ["weapon_switchblade"] = {max = 1},
        ["weapon_battleaxe"] = {max = 1},
        ["weapon_poolcue"] = {max = 1},
        ["weapon_grenade"] = {max = 1},
        ["weapon_pipebomb"] = {max = 1},
        ["weapon_bzgas"] = {max = 1},
        ["weapon_molotov"] = {max = 1},
        ["weapon_stickybomb"] = {max = 1},
        ["weapon_poxmine"] = {max = 1},
        ["weapon_snowball"] = {max = 1},
        ["weapon_ball"] = {max = 1},
        ["weapon_petrolcan"] = {max = 1},
        ["weapon_fireextinguisher"] = {max = 1},
        ["weapon_dagger"] = {max = 1},
        ["weapon_katana"] = {max = 1},
        ["weapon_nailgun"] = {max = 1},
        ["weapon_pickaxe"] = {max = 1},
        ["weapon_fakecombatpistol"] = {max = 0},
        ["weapon_fakesmg"] = {max = 0},
        ["weapon_fakeshotgun"] = {max = 0},
        ["weapon_fakeminismg"] = {max = 0},
        ["weapon_fakeak"] = {max = 0},
        ["weapon_fakeaku"] = {max = 0},
        ["weapon_fakem4"] = {max = 0},
        ["weapon_fakepistol"] = {max = 0},
        ["weapon_fakemachinepistol"] = {max = 0},
        ["weapon_fakespecialcarbine"] = {max = 0},
        ["weapon_pistol"] = {max = 1},
        ["weapon_combatpistol"] = {max = 1},
        ["weapon_glock19gen4"] = {max = 1},
        ["weapon_pistol50"] = {max = 1},
        ["weapon_snspistol"] = {max = 1},
        ["weapon_heavypistol"] = {max = 1},
        ["weapon_pistol50"] = {max = 1},
        ["weapon_flaregun"] = {max = 1},
        ["weapon_stungun_mp"] = {max = 1},
        ["weapon_revolver"] = {max = 1},
        ["weapon_vintagepistol"] = {max = 1},
        ["weapon_doubleaction"] = {max = 1},
        ["weapon_microsmg"] = {max = 1},
        ["weapon_machinepistol"] = {max = 1},
        ["weapon_minismg"] = {max = 1},
        ["weapon_smg"] = {max = 1},
        ["weapon_gusenberg"] = {max = 1},
        ["weapon_assaultrifle"] = {max = 1},
        ["weapon_raycarbine"] = {max = 1},
        ["weapon_carbinerifle"] = {max = 1},
        ["weapon_heavyrifle"] = {max = 1},
        ["weapon_tacticalrifle"] = {max = 1},
        ["weapon_militaryrifle"] = {max = 1},
        ["weapon_specialcarbine"] = {max = 1},
        ["weapon_pumpshotgun"] = {max = 1},
        ["weapon_sawnoffshotgun"] = {max = 1},
        ["weapon_assaultshotgun"] = {max = 1},
        ["weapon_musket"] = {max = 1},
        ["weapon_heavyshotgun"] = {max = 1},
        ["weapon_dbshotgun"] = {max = 1},
        ["weapon_compactrifle"] = {max = 1},
        ["weapon_combatshotgun"] = {max = 1},
        ["weapon_autoshotgun"] = {max = 1},
        ["weapon_laser"] = {max = 1},
        ["weapon_paintball"] = {max = 1},
        ["weapon_flare"] = {max = 1},
        ["weapon_firework"] = {max = 1},
        ["weapon_sniperrifle"] = {max = 1},
        ["weapon_combatmg"] = {max = 1},
        ["weapon_combatmg_mk2"] = {max = 1},
        ["weapon_heavysniper"] = {max = 1},
        ["weapon_heavysniper_mk2"] = {max = 1},
        ["weapon_marksmanrifle"] = {max = 1},
        ["weapon_marksmanrifle_mk2"] = {max = 1},
        ["weapon_precisionrifle"] = {max = 1},
        ["weapon_grenadelauncher_smoke"] = {max = 1},
        ["weapon_railgun"] = {max = 1},
        ["weapon_hominglauncher"] = {max = 1},
        ["weapon_compactlauncher"] = {max = 1},
        ["weapon_rayminigun"] = {max = 1},
        ["weapon_railgunxm3"] = {max = 1},
        ["weapon_pistol_mk2"] = {max = 1},
        ["weapon_snspistol_mk2"] = {max = 1},
        ["weapon_revolver_mk2"] = {max = 1},
        ["weapon_navyrevolver"] = {max = 1},
        ["weapon_gadgetpistol"] = {max = 1},
        ["weapon_stungun"] = {max = 1},
        ["weapon_appistol"] = {max = 1},
        ["weapon_marksmanpistol"] = {max = 1},
        ["weapon_smg_mk2"] = {max = 1},
        ["weapon_ceramicpistol"] = {max = 1},
        ["weapon_assaultsmg"] = {max = 1},
        ["weapon_combatpdw"] = {max = 1},
        ["weapon_pumpshotgun_mk2"] = {max = 1},
        ["weapon_assaultrifle_mk2"] = {max = 1},
        ["weapon_carbinerifle_mk2"] = {max = 1},
        ["weapon_lwrc"] = {max = 1},
        ["weapon_advancedrifle"] = {max = 1},
        ["weapon_specialcarbine_mk2"] = {max = 1},
        ["weapon_bullpuprifle_mk2"] = {max = 1},
        ["weapon_raypistol"] = {max = 1},
        ["weapon_emplauncher"] = {max = 1},
        ["ammo_pistol"] = {max = 2},
        ["ammo_flare"] = {max = 2},
        ["ammo_sub"] = {max = 2},
        ["ammo_shotgun"] = {max = 2},
        ["ammo_rifle"] = {max = 2},
        ["ammo_snip"] = {max = 2},
        ["ammo_musquet"] = {max = 2},
        ["ammo_heavy"] = {max = 2},
        ["ammo_rocket"] = {max = 2},
        ["ammo_beambag"] = {max = 2},
        ["ammobox_pistol"] = {max = 1},
        ["ammobox_flare"] = {max = 1},
        ["ammobox_sub"] = {max = 1},
        ["ammobox_shotgun"] = {max = 1},
        ["ammobox_rifle"] = {max = 1},
        ["ammobox_snip"] = {max = 1},
        ["ammobox_musquet"] = {max = 1},
        ["ammobox_heavy"] = {max = 1},
        ["ammobox_rocket"] = {max = 1},
        ["ammobox_beambag"] = {max = 1},
        ["ammobox_global"] = {max = 1},
        ["money"] = {max = 100000},
        ["weed"] = {max = 100},
        ["coke"] = {max = 100},
        ["fentanyl"] = {max = 100},
        ["meth"] = {max = 100}
    },

    Stockage = {
        ["weapon_bat"] = {max = 3}, 
        ["weapon_bottle"] = {max = 3},
        ["weapon_crowbar"] = {max = 3},
        ["weapon_hammer"] = {max = 3},
        ["weapon_knife"] = {max = 3},
        ["weapon_machete"] = {max = 3},
        ["weapon_switchblade"] = {max = 3},
        ["weapon_battleaxe"] = {max = 3},
        ["weapon_poolcue"] = {max = 3},
        ["weapon_grenade"] = {max = 3},
        ["weapon_pipebomb"] = {max = 3},
        ["weapon_bzgas"] = {max = 3},
        ["weapon_molotov"] = {max = 3},
        ["weapon_stickybomb"] = {max = 3},
        ["weapon_poxmine"] = {max = 3},
        ["weapon_snowball"] = {max = 3},
        ["weapon_ball"] = {max = 3},
        ["weapon_petrolcan"] = {max = 3},
        ["weapon_fireextinguisher"] = {max = 3},
        ["weapon_dagger"] = {max = 3},
        ["weapon_katana"] = {max = 3},
        ["weapon_nailgun"] = {max = 3},
        ["weapon_pickaxe"] = {max = 3},
        ["weapon_fakecombatpistol"] = {max = 3},
        ["weapon_fakesmg"] = {max = 3},
        ["weapon_fakeshotgun"] = {max = 3},
        ["weapon_fakeminismg"] = {max = 3},
        ["weapon_fakeak"] = {max = 3},
        ["weapon_fakeaku"] = {max = 3},
        ["weapon_fakem4"] = {max = 3},
        ["weapon_fakepistol"] = {max = 3},
        ["weapon_fakemachinepistol"] = {max = 3},
        ["weapon_fakespecialcarbine"] = {max = 3},
        ["weapon_pistol"] = {max = 3},
        ["weapon_combatpistol"] = {max = 3},
        ["weapon_glock19gen4"] = {max = 3},
        ["weapon_pistol50"] = {max = 3},
        ["weapon_snspistol"] = {max = 3},
        ["weapon_heavypistol"] = {max = 3},
        ["weapon_pistol50"] = {max = 3},
        ["weapon_flaregun"] = {max = 3},
        ["weapon_stungun_mp"] = {max = 3},
        ["weapon_revolver"] = {max = 3},
        ["weapon_vintagepistol"] = {max = 3},
        ["weapon_doubleaction"] = {max = 3},
        ["weapon_microsmg"] = {max = 3},
        ["weapon_machinepistol"] = {max = 3},
        ["weapon_minismg"] = {max = 3},
        ["weapon_smg"] = {max = 3},
        ["weapon_gusenberg"] = {max = 3},
        ["weapon_assaultrifle"] = {max = 3},
        ["weapon_raycarbine"] = {max = 3},
        ["weapon_carbinerifle"] = {max = 3},
        ["weapon_heavyrifle"] = {max = 3},
        ["weapon_tacticalrifle"] = {max = 3},
        ["weapon_militaryrifle"] = {max = 3},
        ["weapon_specialcarbine"] = {max = 3},
        ["weapon_pumpshotgun"] = {max = 3},
        ["weapon_sawnoffshotgun"] = {max = 3},
        ["weapon_assaultshotgun"] = {max = 3},
        ["weapon_musket"] = {max = 3},
        ["weapon_heavyshotgun"] = {max = 3},
        ["weapon_dbshotgun"] = {max = 3},
        ["weapon_compactrifle"] = {max = 3},
        ["weapon_combatshotgun"] = {max = 3},
        ["weapon_autoshotgun"] = {max = 3},
        ["weapon_laser"] = {max = 3},
        ["weapon_paintball"] = {max = 3},
        ["weapon_flare"] = {max = 3},
        ["weapon_firework"] = {max = 3},
        ["weapon_sniperrifle"] = {max = 3},
        ["weapon_combatmg"] = {max = 3},
        ["weapon_combatmg_mk2"] = {max = 3},
        ["weapon_heavysniper"] = {max = 3},
        ["weapon_heavysniper_mk2"] = {max = 3},
        ["weapon_marksmanrifle"] = {max = 3},
        ["weapon_marksmanrifle_mk2"] = {max = 3},
        ["weapon_precisionrifle"] = {max = 3},
        ["weapon_grenadelauncher_smoke"] = {max = 3},
        ["weapon_railgun"] = {max = 3},
        ["weapon_hominglauncher"] = {max = 3},
        ["weapon_compactlauncher"] = {max = 3},
        ["weapon_rayminigun"] = {max = 3},
        ["weapon_railgunxm3"] = {max = 3},
        ["weapon_pistol_mk2"] = {max = 3},
        ["weapon_snspistol_mk2"] = {max = 3},
        ["weapon_revolver_mk2"] = {max = 3},
        ["weapon_navyrevolver"] = {max = 3},
        ["weapon_gadgetpistol"] = {max = 3},
        ["weapon_stungun"] = {max = 3},
        ["weapon_appistol"] = {max = 3},
        ["weapon_marksmanpistol"] = {max = 3},
        ["weapon_smg_mk2"] = {max = 3},
        ["weapon_ceramicpistol"] = {max = 3},
        ["weapon_assaultsmg"] = {max = 3},
        ["weapon_combatpdw"] = {max = 3},
        ["weapon_pumpshotgun_mk2"] = {max = 3},
        ["weapon_assaultrifle_mk2"] = {max = 3},
        ["weapon_carbinerifle_mk2"] = {max = 3},
        ["weapon_lwrc"] = {max = 3},
        ["weapon_advancedrifle"] = {max = 3},
        ["weapon_specialcarbine_mk2"] = {max = 3},
        ["weapon_bullpuprifle_mk2"] = {max = 3},
        ["weapon_raypistol"] = {max = 3},
        ["weapon_emplauncher"] = {max = 3},
        ["ammo_pistol"] = {max = 10},
        ["ammo_flare"] = {max = 10},
        ["ammo_sub"] = {max = 10},
        ["ammo_shotgun"] = {max = 10},
        ["ammo_rifle"] = {max = 10},
        ["ammo_snip"] = {max = 10},
        ["ammo_musquet"] = {max = 10},
        ["ammo_heavy"] = {max = 10},
        ["ammo_rocket"] = {max = 10},
        ["ammo_beambag"] = {max = 10},
        ["ammobox_pistol"] = {max = 2},
        ["ammobox_flare"] = {max = 2},
        ["ammobox_sub"] = {max = 2},
        ["ammobox_shotgun"] = {max = 2},
        ["ammobox_rifle"] = {max = 2},
        ["ammobox_snip"] = {max = 2},
        ["ammobox_musquet"] = {max = 2},
        ["ammobox_heavy"] = {max = 2},
        ["ammobox_rocket"] = {max = 2},
        ["ammobox_beambag"] = {max = 2},
        ["ammobox_global"] = {max = 2},
        ["money"] = {max = 150000},
        ["weed"] = {max = 250},
        ["coke"] = {max = 250},
        ["fentanyl"] = {max = 250},
        ["meth"] = {max = 250}
    },
    Player = {
        Bank = {max = 200000},
        Item = {
            ["weapon_bat"] = {max = 1}, 
            ["weapon_bottle"] = {max = 1},
            ["weapon_crowbar"] = {max = 1},
            ["weapon_hammer"] = {max = 1},
            ["weapon_knife"] = {max = 1},
            ["weapon_machete"] = {max = 1},
            ["weapon_switchblade"] = {max = 1},
            ["weapon_battleaxe"] = {max = 1},
            ["weapon_poolcue"] = {max = 1},
            ["weapon_grenade"] = {max = 1},
            ["weapon_pipebomb"] = {max = 1},
            ["weapon_bzgas"] = {max = 1},
            ["weapon_molotov"] = {max = 1},
            ["weapon_stickybomb"] = {max = 1},
            ["weapon_poxmine"] = {max = 1},
            ["weapon_snowball"] = {max = 1},
            ["weapon_ball"] = {max = 1},
            ["weapon_petrolcan"] = {max = 1},
            ["weapon_fireextinguisher"] = {max = 1},
            ["weapon_dagger"] = {max = 1},
            ["weapon_katana"] = {max = 1},
            ["weapon_nailgun"] = {max = 1},
            ["weapon_pickaxe"] = {max = 1},
            ["weapon_fakecombatpistol"] = {max = 1},
            ["weapon_fakesmg"] = {max = 1},
            ["weapon_fakeshotgun"] = {max = 1},
            ["weapon_fakeminismg"] = {max = 1},
            ["weapon_fakeak"] = {max = 1},
            ["weapon_fakeaku"] = {max = 1},
            ["weapon_fakem4"] = {max = 1},
            ["weapon_fakepistol"] = {max = 1},
            ["weapon_fakemachinepistol"] = {max = 1},
            ["weapon_fakespecialcarbine"] = {max = 1},
            ["weapon_pistol"] = {max = 1},
            ["weapon_combatpistol"] = {max = 1},
            ["weapon_glock19gen4"] = {max = 1},
            ["weapon_pistol50"] = {max = 1},
            ["weapon_snspistol"] = {max = 1},
            ["weapon_heavypistol"] = {max = 1},
            ["weapon_pistol50"] = {max = 1},
            ["weapon_flaregun"] = {max = 1},
            ["weapon_stungun_mp"] = {max = 1},
            ["weapon_revolver"] = {max = 1},
            ["weapon_vintagepistol"] = {max = 1},
            ["weapon_doubleaction"] = {max = 1},
            ["weapon_microsmg"] = {max = 1},
            ["weapon_machinepistol"] = {max = 1},
            ["weapon_minismg"] = {max = 1},
            ["weapon_smg"] = {max = 1},
            ["weapon_gusenberg"] = {max = 1},
            ["weapon_assaultrifle"] = {max = 1},
            ["weapon_raycarbine"] = {max = 1},
            ["weapon_carbinerifle"] = {max = 1},
            ["weapon_heavyrifle"] = {max = 1},
            ["weapon_tacticalrifle"] = {max = 1},
            ["weapon_militaryrifle"] = {max = 1},
            ["weapon_specialcarbine"] = {max = 1},
            ["weapon_pumpshotgun"] = {max = 1},
            ["weapon_sawnoffshotgun"] = {max = 1},
            ["weapon_assaultshotgun"] = {max = 1},
            ["weapon_musket"] = {max = 1},
            ["weapon_heavyshotgun"] = {max = 1},
            ["weapon_dbshotgun"] = {max = 1},
            ["weapon_compactrifle"] = {max = 1},
            ["weapon_combatshotgun"] = {max = 1},
            ["weapon_autoshotgun"] = {max = 1},
            ["weapon_laser"] = {max = 1},
            ["weapon_paintball"] = {max = 1},
            ["weapon_flare"] = {max = 1},
            ["weapon_firework"] = {max = 1},
            ["weapon_sniperrifle"] = {max = 1},
            ["weapon_combatmg"] = {max = 1},
            ["weapon_combatmg_mk2"] = {max = 1},
            ["weapon_heavysniper"] = {max = 1},
            ["weapon_heavysniper_mk2"] = {max = 1},
            ["weapon_marksmanrifle"] = {max = 1},
            ["weapon_marksmanrifle_mk2"] = {max = 1},
            ["weapon_precisionrifle"] = {max = 1},
            ["weapon_grenadelauncher_smoke"] = {max = 1},
            ["weapon_railgun"] = {max = 1},
            ["weapon_hominglauncher"] = {max = 1},
            ["weapon_compactlauncher"] = {max = 1},
            ["weapon_rayminigun"] = {max = 1},
            ["weapon_railgunxm3"] = {max = 1},
            ["weapon_pistol_mk2"] = {max = 1},
            ["weapon_snspistol_mk2"] = {max = 1},
            ["weapon_revolver_mk2"] = {max = 1},
            ["weapon_navyrevolver"] = {max = 1},
            ["weapon_gadgetpistol"] = {max = 1},
            ["weapon_stungun"] = {max = 1},
            ["weapon_appistol"] = {max = 1},
            ["weapon_marksmanpistol"] = {max = 1},
            ["weapon_smg_mk2"] = {max = 1},
            ["weapon_ceramicpistol"] = {max = 1},
            ["weapon_assaultsmg"] = {max = 1},
            ["weapon_combatpdw"] = {max = 1},
            ["weapon_pumpshotgun_mk2"] = {max = 1},
            ["weapon_assaultrifle_mk2"] = {max = 1},
            ["weapon_carbinerifle_mk2"] = {max = 1},
            ["weapon_lwrc"] = {max = 1},
            ["weapon_advancedrifle"] = {max = 1},
            ["weapon_specialcarbine_mk2"] = {max = 1},
            ["weapon_bullpuprifle_mk2"] = {max = 1},
            ["weapon_raypistol"] = {max = 1},
            ["weapon_emplauncher"] = {max = 1},
            ["ammo_pistol"] = {max = 2},
            ["ammo_flare"] = {max = 2},
            ["ammo_sub"] = {max = 2},
            ["ammo_shotgun"] = {max = 2},
            ["ammo_rifle"] = {max = 2},
            ["ammo_snip"] = {max = 2},
            ["ammo_musquet"] = {max = 2},
            ["ammo_heavy"] = {max = 2},
            ["ammo_rocket"] = {max = 2},
            ["ammo_beambag"] = {max = 2},
            ["ammobox_pistol"] = {max = 1},
            ["ammobox_flare"] = {max = 1},
            ["ammobox_sub"] = {max = 1},
            ["ammobox_shotgun"] = {max = 1},
            ["ammobox_rifle"] = {max = 1},
            ["ammobox_snip"] = {max = 1},
            ["ammobox_musquet"] = {max = 1},
            ["ammobox_heavy"] = {max = 1},
            ["ammobox_rocket"] = {max = 1},
            ["ammobox_beambag"] = {max = 1},
            ["ammobox_global"] = {max = 1},
            ["money"] = {max = 200000},
            ["weed"] = {max = 50},
            ["coke"] = {max = 50},
            ["fentanyl"] = {max = 50},
            ["meth"] = {max = 50}
        }
    }
}

local function ClearVehicleStash()
    local startTime = os.time()
    local vehicles = MySQL.query.await('SELECT * FROM vehicles')
    local totalChanges = 0
    
    for _, vehicle in pairs(vehicles) do
        if vehicle.inventory then
            local inventory = json.decode(vehicle.inventory)
            local modified = false

            if inventory and inventory.item and type(inventory.item) == "table" then
                for itemName, itemConfig in pairs(Config.VehicleStash) do
                    for i = #inventory.item, 1, -1 do
                        local item = inventory.item[i]
                        if item.name == itemName and item.count > itemConfig.max then
                            print("^2L'objet " .. item.name .. " dans le véhicule " .. vehicle.plate .. " dépasse la quantité maximale autorisée. Définition au maximum: " .. itemConfig.max .. "^7")
                            totalChanges = totalChanges + (item.count - itemConfig.max)
                            item.count = itemConfig.max
                            modified = true
                        end
                    end
                end
            end

            if modified then
                local currentWeight = 0
                for _, item in pairs(inventory.item) do
                    currentWeight = currentWeight + (item.weight * item.count)
                end
                inventory.weight.current = currentWeight
                
                MySQL.update.await('UPDATE vehicles SET inventory = ? WHERE plate = ?', {
                    json.encode(inventory),
                    vehicle.plate
                })
            end
        end
    end
    
    local endTime = os.time()
    local duration = endTime - startTime
    print("^4Nettoyage des coffres de véhicules terminé en " .. duration .. " secondes^7")
    print("^3Total des objets retirés: " .. totalChanges .. "^7")
end

local function ClearPropertyStash()
    local startTime = os.time()
    local properties = MySQL.query.await('SELECT * FROM property')
    local totalChanges = 0
    
    for _, property in pairs(properties) do
        if property.inventory then
            local inventory = json.decode(property.inventory)
            local modified = false

            if inventory and type(inventory) == "table" then
                for itemName, itemConfig in pairs(Config.Stockage) do
                    for i = #inventory, 1, -1 do
                        local item = inventory[i]
                        if item.name == itemName and item.count > itemConfig.max then
                            print("^2L'objet " .. item.name .. " dans la propriété " .. property.id .. " dépasse la quantité maximale autorisée. Définition au maximum: " .. itemConfig.max .. "^7")
                            totalChanges = totalChanges + (item.count - itemConfig.max)
                            item.count = itemConfig.max
                            modified = true
                        end
                    end
                end
            end

            if modified then
                MySQL.update.await('UPDATE property SET inventory = ? WHERE id = ?', {
                    json.encode(inventory),
                    property.id
                })
            end
        end
    end
    
    local endTime = os.time()
    local duration = endTime - startTime
    print("^4Nettoyage des coffres de propriétés terminé en " .. duration .. " secondes^7")
    print("^3Total des objets retirés: " .. totalChanges .. "^7")
end

local function ClearPlayerInventory()
    local startTime = os.time()
    local players = MySQL.query.await('SELECT * FROM players')
    local playersToUpdate = {}
    local bankUpdates = {}
    local totalChanges = 0
    local totalBankChanges = 0
    
    for _, player in pairs(players) do
        local modified = false

        if player.banque and tonumber(player.banque) > Config.Player.Bank.max then
            print("^2Le joueur " .. player.id .. " a plus d'argent en banque que le maximum autorisé. Définition au maximum: " .. Config.Player.Bank.max .. "^7")
            totalBankChanges = totalBankChanges + (tonumber(player.banque) - Config.Player.Bank.max)
            table.insert(bankUpdates, player.id)
            modified = true
        end

        if player.inventaire then
            local inventory = json.decode(player.inventaire)
            local inventoryModified = false

            if inventory and type(inventory) == "table" then
                for i = #inventory, 1, -1 do
                    local item = inventory[i]
                    if Config.Player.Item[item.name] and item.count > Config.Player.Item[item.name].max then
                        print("^2L'objet " .. item.name .. " du joueur " .. player.id .. " dépasse la quantité maximale autorisée. Définition au maximum: " .. Config.Player.Item[item.name].max .. "^7")
                        totalChanges = totalChanges + (item.count - Config.Player.Item[item.name].max)
                        item.count = Config.Player.Item[item.name].max
                        inventoryModified = true
                    end
                end
            end

            if inventoryModified then
                playersToUpdate[player.id] = json.encode(inventory)
                modified = true
            end
        end
    end

    if #bankUpdates > 0 then
        MySQL.update.await('UPDATE players SET banque = ? WHERE id IN (' .. table.concat(bankUpdates, ',') .. ')', {
            Config.Player.Bank.max
        })
    end

    for playerId, inventory in pairs(playersToUpdate) do
        MySQL.update.await('UPDATE players SET inventaire = ? WHERE id = ?', {
            inventory,
            playerId
        })
    end
    
    local endTime = os.time()
    local duration = endTime - startTime
    print("^4Nettoyage des inventaires des joueurs terminé en " .. duration .. " secondes^7")
end

RegisterCommand('clearvehiclestash', function(source, args, rawCommand)
    if source ~= 0 then return end
    ClearVehicleStash()
end)

RegisterCommand('clearpropertystash', function(source, args, rawCommand)
    if source ~= 0 then return end
    ClearPropertyStash()
end)

RegisterCommand('clearplayerinventory', function(source, args, rawCommand)
    if source ~= 0 then return end
    ClearPlayerInventory()
end)

