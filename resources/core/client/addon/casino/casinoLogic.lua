RegisterNetEvent("core:casinoCar")
AddEventHandler("core:casinoCar", function(vehicleProps)
    local spawn = vector4(919.24139404297, 51.486835479736, 79.89867401123, 326.52865600586)
    local vehicles = vehicle.create(vehicleProps.model, spawn, { plate = vehicleProps.plate })
    TriggerServerEvent("core:SetPropsVeh", token, string.upper(vehicleProps.plate), vehicle.getProps(vehicles))
    TriggerServerEvent("core:SetVehicleOut", string.upper(vehicleProps.plate), VehToNet(vehicles), vehicle)
    TriggerServerEvent("core:SetPropsVeh", token, string.upper(vehicleProps.plate), vehicle.getProps(vehicles))
    SetVehicleDirtLevel(vehicles, 0.0)
    createKeys(vehicleProps.plate, vehicleProps.model)
end)

local SLOT_MACHINE_COORDS = {{-1932041857, vec3(989.018372, 43.866661, 79.988640), 259.0, vector3(0.0, 0.0, 259.0)},
    {-1519644200, vec3(988.967896, 43.153545, 79.990364), 274.0, vector3(0.0, 0.0, 274.0)},
    {-430989390, vec3(989.106995, 42.432472, 79.992340), 288.0, vector3(0.0, 0.0, 288.0)},
    {654385216, vec3(989.423828, 41.762829, 79.994408), 303.0, vector3(0.0, 0.0, 303.0)},
    {161343630, vec3(989.898621, 41.216156, 79.996368), 318.0, vector3(0.0, 0.0, 318.0)},
    {161343630, vec3(978.090210, 26.445480, 79.996368), 217.9998626709,
    vector3(0.0, 0.0, 217.9998626709)},
    {654385216, vec3(978.710876, 26.818045, 79.994408), 202.9998626709,
    vector3(0.0, 0.0, 202.9998626709)},
    {-430989390, vec3(979.425415, 27.013876, 79.992340), 187.99984741211,
    vector3(0.0, 0.0, 187.99984741211)},
    {-1519644200, vec3(980.159485, 27.025547, 79.990364), 173.9998626709,
    vector3(0.0, 0.0, 173.9998626709)},
    {-1932041857, vec3(980.853577, 26.852013, 79.988640), 158.9998626709,
    vector3(0.0, 0.0, 158.9998626709)},
    {654385216, vec3(985.812927, 36.257877, 79.968033), 237.99989318848,
    vector3(0.0, 0.0, 237.99989318848)},
    {-430989390, vec3(986.269348, 36.831924, 79.966370), 222.99984741211,
    vector3(0.0, 0.0, 222.99984741211)},
    {-1519644200, vec3(986.862671, 37.245937, 79.964462), 207.9998626709,
    vector3(0.0, 0.0, 207.9998626709)},
    {-1932041857, vec3(987.530518, 37.512577, 79.962471), 191.9998626709,
    vector3(0.0, 0.0, 191.9998626709)},
    {161343630, vec3(985.507019, 35.593266, 79.969376), 252.9998626709,
    vector3(0.0, 0.0, 252.9998626709)},
    {1096374064, vec3(985.385315, 34.866543, 79.970268), 268.99984741211,
    vector3(0.0, 0.0, 268.99984741211)},
    {207578973, vec3(985.454651, 34.135567, 79.970657), 282.99984741211,
    vector3(0.0, 0.0, 282.99984741211)},
    {207578973, vec3(963.372131, 35.407356, 79.990387), 148.0, vector3(0.0, 0.0, 148.0)},
    {-487222358, vec3(963.934692, 35.055840, 79.988724), 148.0, vector3(0.0, 0.0, 148.0)},
    {1096374064, vec3(964.497253, 34.704327, 79.987061), 148.0, vector3(0.0, 0.0, 148.0)},
    {207578973, vec3(967.211243, 57.055077, 79.997025), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {207578973, vec3(967.651489, 56.780041, 79.996796), 58.000202178955,
    vector3(0.0, 0.0, 58.000202178955)},
    {1096374064, vec3(968.350159, 57.907612, 79.994499), 58.000202178955,
    vector3(0.0, 0.0, 58.000202178955)},
    {1096374064, vec3(967.914551, 58.180248, 79.993698), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {-487222358, vec3(967.562683, 57.617565, 79.995361), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {161343630, vec3(965.056213, 34.355038, 79.985413), 148.0, vector3(0.0, 0.0, 148.0)},
    {654385216, vec3(962.814331, 35.755898, 79.992035), 148.0, vector3(0.0, 0.0, 148.0)},
    {-430989390, vec3(962.255615, 36.105045, 79.993683), 148.0, vector3(0.0, 0.0, 148.0)},
    {654385216, vec3(966.369385, 37.846661, 79.990387), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {654385216, vec3(966.809631, 37.571621, 79.990158), 58.000202178955,
    vector3(0.0, 0.0, 58.000202178955)},
    {-487222358, vec3(967.160156, 38.134762, 79.989227), 57.999977111816,
    vector3(0.0, 0.0, 57.999977111816)},
    {1096374064, vec3(967.508301, 38.699203, 79.987862), 58.00003051758,
    vector3(0.0, 0.0, 292.00003051758)},
    {207578973, vec3(967.072693, 38.971836, 79.987061), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {-1519644200, vec3(966.720825, 38.409149, 79.988724), 237.9998626709,
    vector3(0.0, 0.0, 237.9998626709)},
    {161343630, vec3(978.933777, 36.864388, 79.994438), 236.0, vector3(0.0, 0.0, 236.0)},
    {1096374064, vec3(979.667542, 37.184486, 79.994438), 171.99998474121,
    vector3(0.0, 0.0, 171.99998474121)},
    {207578973, vec3(978.867188, 36.068512, 79.994438), 295.00003051758,
    vector3(0.0, 0.0, 295.00003051758)},
    {-487222358, vec3(979.493652, 35.590004, 79.994438), 348.99990844727,
    vector3(0.0, 0.0, 348.99990844727)},
    {-430989390, vec3(980.293579, 36.689678, 79.994438), 113.0, vector3(0.0, 0.0, 113.0)},
    {654385216, vec3(980.239075, 35.904007, 79.994438), 55.999992370605,
    vector3(0.0, 0.0, 55.999992370605)},
    {-430989390, vec3(973.564880, 34.982811, 79.994438), 348.99990844727,
    vector3(0.0, 0.0, 348.99990844727)},
    {1096374064, vec3(973.005066, 36.257160, 79.994438), 236.0, vector3(0.0, 0.0, 236.0)},
    {654385216, vec3(972.938416, 35.461330, 79.994438), 295.00003051758,
    vector3(0.0, 0.0, 295.00003051758)},
    {207578973, vec3(974.310303, 35.296814, 79.994438), 55.999992370605,
    vector3(0.0, 0.0, 55.999992370605)},
    {-487222358, vec3(974.364807, 36.082489, 79.994438), 113.0, vector3(0.0, 0.0, 113.0)},
    {161343630, vec3(973.738770, 36.577305, 79.994438), 171.99998474121,
    vector3(0.0, 0.0, 171.99998474121)},
    {-1519644200, vec3(979.837891, 45.703922, 79.994438), 348.99990844727,
    vector3(0.0, 0.0, 348.99990844727)},
    {-487222358, vec3(979.278076, 46.978271, 79.994438), 236.0, vector3(0.0, 0.0, 236.0)},
    {1096374064, vec3(979.211426, 46.182434, 79.994438), 295.00003051758,
    vector3(0.0, 0.0, 295.00003051758)},
    {207578973, vec3(980.583313, 46.017925, 79.994438), 55.999992370605,
    vector3(0.0, 0.0, 55.999992370605)},
    {-1932041857, vec3(980.637817, 46.803608, 79.994438), 113.0, vector3(0.0, 0.0, 113.0)},
    {161343630, vec3(980.011841, 47.298409, 79.994438), 171.99998474121,
    vector3(0.0, 0.0, 171.99998474121)},
    {-487222358, vec3(982.825623, 40.895329, 79.994438), 348.99990844727,
    vector3(0.0, 0.0, 348.99990844727)},
    {654385216, vec3(982.265869, 42.169674, 79.994438), 236.0, vector3(0.0, 0.0, 236.0)},
    {161343630, vec3(982.199158, 41.373844, 79.994438), 295.00003051758,
    vector3(0.0, 0.0, 295.00003051758)},
    {1096374064, vec3(983.571045, 41.209335, 79.994438), 55.999992370605,
    vector3(0.0, 0.0, 55.999992370605)},
    {-1519644200, vec3(983.625549, 41.995010, 79.994438), 113.0, vector3(0.0, 0.0, 113.0)},
    {207578973, vec3(982.999512, 42.489819, 79.994438), 171.99998474121,
    vector3(0.0, 0.0, 171.99998474121)},
    {-1932041857, vec3(954.226318, 57.955360, 79.979485), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {207578973, vec3(953.819458, 57.304287, 79.981407), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {-1519644200, vec3(953.416199, 56.658924, 79.983315), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {161343630, vec3(953.017029, 56.020168, 79.985199), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {-487222358, vec3(952.613708, 55.374779, 79.987106), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {1096374064, vec3(952.217529, 54.740784, 79.988983), 237.99996948242,
    vector3(0.0, 0.0, 237.99996948242)},
    {1096374064, vec3(952.571533, 51.886127, 79.996994), 328.0, vector3(0.0, 0.0, 328.0)},
    {161343630, vec3(953.769287, 51.137688, 79.994911), 328.0, vector3(0.0, 0.0, 328.0)},
    {207578973, vec3(953.170837, 51.511631, 79.995941), 328.0, vector3(0.0, 0.0, 328.0)},
    {1096374064, vec3(956.853882, 58.805462, 79.996994), 147.99998474121,
    vector3(0.0, 0.0, 147.99998474121)},
    {207578973, vec3(958.075012, 58.042412, 79.996994), 147.99998474121,
    vector3(0.0, 0.0, 147.99998474121)},
    {161343630, vec3(957.460999, 58.426075, 79.996994), 147.99998474121,
    vector3(0.0, 0.0, 147.99998474121)},
    {207578973, vec3(957.973083, 55.529278, 79.988983), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {-487222358, vec3(957.587769, 54.888565, 79.987106), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {654385216, vec3(957.195496, 54.236031, 79.985199), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {161343630, vec3(956.807800, 53.590446, 79.983315), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {-430989390, vec3(956.415649, 52.938099, 79.981407), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {1096374064, vec3(956.020264, 52.280151, 79.979485), 58.99995803833,
    vector3(0.0, 0.0, 58.99995803833)},
    {-487222358, vec3(968.001892, 57.343266, 79.995865), 58.000202178955,
    vector3(0.0, 0.0, 58.000202178955)}
}

BlackJackTables = {
    vector3(1148.84, 269.74, -52.84),
    vector3(1151.84, 266.747, -52.8409),
    vector3(1129.406, 262.3578, -52.041),
    vector3(1144.429, 247.3352, -52.041),
}

Pokers = {
    vector3(1143.338, 264.2453, -52.8409),
    vector3(1146.329, 261.2543, -52.8409),
    vector3(1133.74, 266.6947, -52.0409),
    vector3(1148.74, 251.6947, -52.0409),
}


local horseChairs = {{947.73120, 78.91850, 69.03276}, {948.63250, 79.12659, 69.03276}, {951.93240, 79.92471, 69.03276},

{952.83370, 80.13280, 69.03276}, {953.83240, 80.36337, 69.03276}, {954.73360, 80.57192, 69.03276},

{958.04430, 81.29948, 69.03276}, {958.94580, 81.50755, 69.03276}, {947.81390, 76.11526, 69.03276},

{948.71520, 76.32335, 69.03276}, {952.55090, 77.24567, 69.03255}, {953.45230, 77.45328, 69.03276},

{954.45100, 77.68385, 69.03276}, {955.35230, 77.89193, 69.03276}, {959.19890, 78.74368, 69.03276},

{960.10010, 78.95177, 69.03276}}

local LUCKY_WHEEL_COORDS = vector3(949.696777, 45.061569, 71.632759)

local CashierDatas = {{
    coords = vector3(950.038879, 31.957714, 71.838463),
    heading = 79.5398,
    model = "a_f_y_bevhills_02",
    enabled = false
}, {
    coords = vector3(950.305969, 33.064224, 71.838608),
    heading = 62.3299,
    model = "a_f_y_business_04",
    enabled = true
}, {
    coords = vector3(951.129578, 33.638176, 71.838776),
    heading = 29.9910,
    model = "a_f_y_bevhills_04",
    enabled = false
}}

-- Magic GabZ convertor
local GABZ_OFFSET = vector3(935.104980 - 975.691101, 42.565639 - 40.303509, 71.273697 - 70.901016)
local function Convert2Gabz(vec1)
    if not vec1 then
        return nil
    end
    if (type(vec1) == "table") then
        return {vec1[1] - GABZ_OFFSET.x, vec1[2] - GABZ_OFFSET.y, vec1[3] - GABZ_OFFSET.z}
    elseif (type(vec1) == "vector2") then
        return vector(vec1.x - GABZ_OFFSET.x, vec1.y - GABZ_OFFSET.y)
    else
        return vector3(vec1.x - GABZ_OFFSET.x, vec1.y - GABZ_OFFSET.y, vec1.z - GABZ_OFFSET.z)
    end
end

for i = 1, #CashierDatas do
    CashierDatas[i].coords = Convert2Gabz(CashierDatas[i].coords)
end

CreateThread(function()
    while not zone do Wait(1000) end 
    zone.addZone("caisnoLuckyWheel",
        LUCKY_WHEEL_COORDS + vector3(0.0, 0.0, 1.0),
        "~INPUT_CONTEXT~ Magasin de vêtements",
        function()
        end, false,
        27,
        0.5,
        { 255, 255, 255 },
        170,
        3.0,
        true,
        "bulleTournerCasino"
    )
    zone.addZone("caisnoLuckyWheelSW",
        vec3(1111.05, 229.84, -50.64) + vector3(0.0, 0.0, 3.0),
        "~INPUT_CONTEXT~ Magasin de vêtements",
        function()
        end, false,
        27,
        0.5,
        { 255, 255, 255 },
        170,
        3.0,
        true,
        "bulleTournerCasino"
    )
    for k,v in pairs(CashierDatas) do 
        zone.addZone("CashierDatas" .. k,
            v.coords + vector3(0.0, 0.0, 1.0),
            "~INPUT_CONTEXT~ Magasin de vêtements",
            function()
            end, false,
            27,
            0.5,
            { 255, 255, 255 },
            170,
            3.0,
            true,
            "bulleAcheterCasino"
        )
    end
    for k,v in pairs(horseChairs) do 
        local x,y,z = table.unpack(v)
        Bulle.create("horseChairs" .. k, vec3(x,y,z), "bulleInsideTrack", true)
    end
    for k,v in pairs(BlackJackTables) do 
        zone.addZone("BlackJackTables" .. k,
            v + vector3(0.0, 0.0, 1.25),
            "~INPUT_CONTEXT~ Magasin de vêtements",
            function()
            end, false,
            27,
            0.5,
            { 255, 255, 255 },
            170,
            3.0,
            true,
            "bulleBlackjack"
        )
    end
    for k,v in pairs(Pokers) do 
        zone.addZone("Pokers" .. k,
            v + vector3(0.0, 0.0, 1.25),
            "~INPUT_CONTEXT~ Magasin de vêtements",
            function()
            end, false,
            27,
            0.5,
            { 255, 255, 255 },
            170,
            3.0,
            true,
            "bullePoker"
        )
    end

    
    zone.addZone("sortirCasino",
        CasinoConfig.ExitPos,
        "~INPUT_CONTEXT~ Magasin de vêtements",
        function()
        end, false,
        27,
        0.5,
        { 255, 255, 255 },
        170,
        3.0,
        true,
        "bulleSortir"
    )
    
    zone.addZone("entrerCasino",
        CasinoConfig.EnterPos,
        "~INPUT_CONTEXT~ Magasin de vêtements",
        function()
        end, false,
        27,
        0.5,
        { 255, 255, 255 },
        170,
        3.0,
        true,
        "bulleEntrer"
    )
end)


function ShowPokerBulles()
    for k, v in pairs(Pokers) do 
        Bulle.hide("Pokers" .. k)
    end
end

function HidePokerBulles()
    for k, v in pairs(Pokers) do 
        Bulle.show("Pokers" .. k)
    end
end